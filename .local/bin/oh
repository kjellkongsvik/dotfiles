#!/usr/bin/env bash

case "$(uname -sr)" in
  Darwin*)
    var=`pbpaste`
    ;;
  Linux*)
    var=`wl-paste`
    ;;
esac
var=$(readlink -f $var)
window_index=$(tmux display-message -p '#{window_index}')
pane_id=$(tmux list-panes -t $window_index -F "#{pane_id} #{pane_current_command}" | awk '$2 == "hx" { print $1; exit }')
if [ -z "${pane_id}" ]; then
  exit
fi
var=`echo $var | sed s/\(/:/g`
var=`echo $var | sed s/\,/:/g`
var=`echo $var | sed s/\)//g`

tmux select-pane -t $pane_id
tmux send-keys -t $pane_id Escape
tmux send-keys -t $pane_id ":o "$var
tmux send-keys -t $pane_id Enter
